description "Overview message broker"
author "Overview Project"

start on runlevel [2345]
stop on runlevel [016]

setuid overview
setgid overview
chdir /opt/overview
console output

respawn

exec /usr/bin/java \
       -cp "<%= managed_code_path %>/message-broker/current/*" \
       -Dapollo.base=/var/lib/apollo \
       -Dmail.smtp.starttls.enable="<%= smtp_ssl && 'true' || 'false' %>" \
       -Dmail.smtp.port="<%= smtp_port %>" \
       org.apache.activemq.apollo.boot.Apollo \
       /var/lib/apollo \
       org.apache.activemq.apollo.cli.Apollo \
       run \
       2>&1 | logger -p local3.notice
